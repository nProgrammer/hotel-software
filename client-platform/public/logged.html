<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="config.js"></script>
    <script>
        function postClientRegName() {
            const nameR = document.getElementById("nameR").value;
            return nameR
        }
        function postClientRegSName() {
            const snameR = document.getElementById("snameR").value;
            return snameR
        }
        function postClientRegSN() {
            const snR =  document.getElementById("snR").value;
            return snR
        }
        function postClientRegPassM() {
            const passMR =  document.getElementById("passMR").value;
            return passMR
        }
        function postClientDelPassM() {
            const passMD =  document.getElementById("passMD").value;
            return passMD
        }
        function postClientDelSN() {
            const snD =  document.getElementById("snD").value;
            return snD
        }
        function CreateQueryRegisterClient() {
            const nameR = postClientRegName();
            const snameR = postClientRegSName();
            const snR = postClientRegSN();
            const passM = postClientRegPassM();
            if (snR.length === 9) {
                window.location.href = 'http://localhost:8000/register-client?name=' + nameR + "&surname=" + snameR + "&sn=" + snR + "&passM=" + passM;
            } else if (snR < 9) {
                document.getElementById("errorR").innerHTML = "TO SHORT SERIAL NUMBER";
            } else {
                document.getElementById("errorR").innerHTML = "TO LONG SERIAL NUMBER";
            }
        }
        function CreateQueryDelClient() {
            const snD = postClientDelSN();
            const passD = postClientDelPassM();
            window.location.href = 'http://localhost:8000/delete-client?sn=' + snD + "&passM=" + passD;
        }
        function checkErrorPassM() {
            const url = window.location.href;
            const errorMessage = url[40] + url[41] + url[42] + url[43] + url[44] + url[45] + url[46] + url[47] + url[48] + url[49] + url[50] + url[51] + url[52] + url[53] + url[54] + url[55] + url[56] + url[57] + url[58];
            console.log(errorMessage);
            if (errorMessage === "wrong-manager-passundefined") {
                document.getElementById("errorR").innerHTML = "WRONG MANAGER'S PASSWORD";
            }
        }
        function checkErrorPassMD() {
            const url = window.location.href;
            const errorMessage = url[40] + url[41] + url[42] + url[43] + url[44] + url[45] + url[46] + url[47] + url[48] + url[49] + url[50] + url[51] + url[52] + url[53] + url[54] + url[55] + url[56] + url[57] + url[58];
            console.log(errorMessage);
            if (errorMessage === "wrong-manager-passD") {
                document.getElementById("errorRD").innerHTML = "WRONG MANAGER'S PASSWORD";
            }
        }
        function iframeConfig() {
            document.getElementById("clientScreen").innerHTML ='<iframe style="height: 90vh" src="' + ApiURL + 'show-clients' + '"></iframe>';
        }
        function doE() {
            iframeConfig();
            checkErrorPassM();
            checkErrorPassMD();
        }

        window.onload = doE;
    </script>
</head>
<body>
    <article style="margin-right: 5vw; display: inline-block; float: right;">
        <div>
            <h3>List of clients: </h3>
            <div id="clientScreen"></div>
        </div>
    </article>
    <center>
        <main style="display: inline-block; margin-top: 20vh;">
            REGISTER CLIENT: <br><br>
            <div style="margin-left: 0px;"><input type="text" placeholder="Client name" id="nameR"> <br><br>
            <input type="text" placeholder="Client surname" id="snameR"> <br><br>
            <input type="password" placeholder="Client S/N" id="snR"><br><br>
            <input type="password" placeholder="Manager's password" id="passMR"><br><br>
            <button onclick="CreateQueryRegisterClient()">REGISTER</button>
                <p id="errorR" style="color: red;"></p>
            </div>
        </main>
        <section style="margin-top: 10vh;">
            DELETE CLIENT: <br><br>
            <input type="text" placeholder="Client S/N" id="snD"><br><br>
            <input type="password" placeholder="Manager's password" id="passMD"><br><br>
            <button onclick="CreateQueryDelClient()">DELETE</button>
                <p id="errorRD" style="color: red;"></p>
        </section>
    </center>
</body>
</html>
